name: Create PR 

on:
  workflow_dispatch:

jobs:
  pull-request:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
        
    - name: Create report file
      run: date +%s > report.txt
      
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v3
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        commit-message: Add report file
        body: |
          New report
          - Contains *today's* date
          - Auto-generated by [create-pull-request][1]
          [1]: https://github.com/peter-evans/create-pull-request
          
        title: '[Example] Add report file'
        labels: version-bump
        branch: version-bump
        delete-branch: true

    - uses: hmarr/auto-approve-action@v2.0.0
#       if: github.actor == 'github_actions[bot]' && github.event.label.name == 'version-bump'
      if: github.actor == 'github_actions[bot]'
      with:
        github-token: "${{ secrets.GITHUB_TOKEN }}"

